<h1>Carrera OS</h1>

<input id="ip" placeholder="IP" onchange="setIP()" value="http://192.168.137.25"> 

<h2 id="speedDisplay">00</h2>

<input id="inputSlider" type="range" min="0" max="100" value="0" oninput="changeInput()">

<script>
    var ip=document.getElementById("ip").value;
    function setIP() {
        ip = document.getElementById("ip").value;
    }
    function changeInput() {
        const value = document.getElementById("inputSlider").value;
        document.getElementById("speedDisplay").innerHTML = value;
        httpPostAsync(`${ip}?Speed=${value}`, log);
    }

    function test() {
        httpGetAsync(`${ip}`, log);
    }

    function httpGetAsync(theUrl, callback) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() { 
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                callback(xmlHttp.responseText);
        }
        xmlHttp.open("GET", theUrl, true); // true for asynchronous 
        xmlHttp.send(null);
    }

    function httpPostAsync(theUrl, callback) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() { 
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                callback(xmlHttp.responseText);
        }
        xmlHttp.open("POST", theUrl, true); // true for asynchronous 
        xmlHttp.send(null);
    }

    // function httpPutAsync(url, body, callback) {
    //     var xmlHttp = new XMLHttpRequest();
    //     xmlHttp.onreadystatechange = function() { 
    //         if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
    //             callback(xmlHttp.responseText);
    //     }
    //     xmlHttp.open("PUT", url, true); // true for asynchronous 
    //     xmlHttp.send(body);
    // }

    function log(message) {
        console.log(message);
    }
</script>

<style>
#inputSlider {
    position: fixed;
    transform: rotate(-90deg);
    width: 80vh;
    top: 50%;
    left: -35vh;
}
</style>